* Avaliação CATP #08

** Sumário

| Código | Mean |
|--------+------|
| ???866 | 6.67 |
| ???787 |    5 |
| ???410 |    5 |
| ???810 |    0 |
| ???688 | 6.67 |
| ???973 | 6.67 |
| ???820 | 9.17 |
| ???341 | 6.67 |
| ???106 | 3.33 |
| ???249 | 6.67 |
| ???259 | 6.67 |
| ???262 | 5.83 |
| ???274 | 5.83 |
| ???285 |  2.5 |
| ???288 |    5 |
| ???653 | 3.33 |
| ???658 |   10 |
| ???950 | 9.17 |
| ???031 |    5 |
| ???849 | 5.83 |
| ???856 | 0.83 |
| ???834 | 5.83 |
| ???567 | 9.17 |
| ???575 | 0.83 |
| ???586 | 4.17 |
| ???525 |  2.5 |
| ???109 |    5 |
| ???848 | 9.17 |
| ???172 |    5 |

** Detalhamento da avaliação

| Código | EX | Nota |
|--------+----+------|
| ???031 | E1 |    1 |
| ???031 | E2 |    0 |
| ???031 | E3 |    0 |
| ???031 | E4 |  0.5 |
| ???031 | E5 |  0.5 |
| ???031 | E6 |    1 |
| ???106 | E1 |  0.5 |
| ???106 | E2 |  0.5 |
| ???106 | E3 |    1 |
| ???106 | E4 |    0 |
| ???106 | E5 |    0 |
| ???106 | E6 |    0 |
| ???109 | E1 |  0.5 |
| ???109 | E2 |  0.5 |
| ???109 | E3 |    1 |
| ???109 | E4 |  0.5 |
| ???109 | E5 |  0.5 |
| ???109 | E6 |    0 |
| ???172 | E1 |    0 |
| ???172 | E2 |    0 |
| ???172 | E3 |    1 |
| ???172 | E4 |  0.5 |
| ???172 | E5 |  0.5 |
| ???172 | E6 |    1 |
| ???249 | E1 |    0 |
| ???249 | E2 |  0.5 |
| ???249 | E3 |    1 |
| ???249 | E4 |  0.5 |
| ???249 | E5 |    1 |
| ???249 | E6 |    1 |
| ???259 | E1 |  0.5 |
| ???259 | E2 |  0.5 |
| ???259 | E3 |    1 |
| ???259 | E4 |  0.5 |
| ???259 | E5 |  0.5 |
| ???259 | E6 |    1 |
| ???262 | E1 |    1 |
| ???262 | E2 |  0.5 |
| ???262 | E3 |    1 |
| ???262 | E4 |    0 |
| ???262 | E5 |    0 |
| ???262 | E6 |    1 |
| ???274 | E1 |    1 |
| ???274 | E2 |  0.5 |
| ???274 | E3 |  0.5 |
| ???274 | E4 |  0.5 |
| ???274 | E5 |  0.5 |
| ???274 | E6 |  0.5 |
| ???285 | E1 |  0.5 |
| ???285 | E2 |    0 |
| ???285 | E3 |  0.5 |
| ???285 | E4 |    0 |
| ???285 | E5 |  0.5 |
| ???285 | E6 |    0 |
| ???288 | E1 |    0 |
| ???288 | E2 |  0.5 |
| ???288 | E3 |    1 |
| ???288 | E4 |    0 |
| ???288 | E5 |  0.5 |
| ???288 | E6 |    1 |
| ???341 | E1 |    1 |
| ???341 | E2 |  0.5 |
| ???341 | E3 |  0.5 |
| ???341 | E4 |  0.5 |
| ???341 | E5 |  0.5 |
| ???341 | E6 |    1 |
| ???410 | E1 |    1 |
| ???410 | E2 |  0.5 |
| ???410 | E3 |  0.5 |
| ???410 | E4 |  0.5 |
| ???410 | E5 |  0.5 |
| ???410 | E6 |    0 |
| ???525 | E1 |  0.5 |
| ???525 | E2 |    0 |
| ???525 | E3 |  0.5 |
| ???525 | E4 |    0 |
| ???525 | E5 |  0.5 |
| ???525 | E6 |    0 |
| ???567 | E1 |    1 |
| ???567 | E2 |    1 |
| ???567 | E3 |    1 |
| ???567 | E4 |    1 |
| ???567 | E5 |  0.5 |
| ???567 | E6 |    1 |
| ???575 | E1 |    0 |
| ???575 | E2 |  0.5 |
| ???575 | E3 |    0 |
| ???575 | E4 |    0 |
| ???575 | E5 |    0 |
| ???575 | E6 |    0 |
| ???586 | E1 |    0 |
| ???586 | E2 |  0.5 |
| ???586 | E3 |  0.5 |
| ???586 | E4 |    0 |
| ???586 | E5 |  0.5 |
| ???586 | E6 |    1 |
| ???653 | E1 |  0.5 |
| ???653 | E2 |    0 |
| ???653 | E3 |    0 |
| ???653 | E4 |    0 |
| ???653 | E5 |  0.5 |
| ???653 | E6 |    1 |
| ???658 | E1 |    1 |
| ???658 | E2 |    1 |
| ???658 | E3 |    1 |
| ???658 | E4 |    1 |
| ???658 | E5 |    1 |
| ???658 | E6 |    1 |
| ???688 | E1 |  0.5 |
| ???688 | E2 |  0.5 |
| ???688 | E3 |    1 |
| ???688 | E4 |  0.5 |
| ???688 | E5 |  0.5 |
| ???688 | E6 |    1 |
| ???787 | E1 |  0.5 |
| ???787 | E2 |  0.5 |
| ???787 | E3 |    0 |
| ???787 | E4 |  0.5 |
| ???787 | E5 |  0.5 |
| ???787 | E6 |    1 |
| ???810 | E1 |    0 |
| ???810 | E2 |    0 |
| ???810 | E3 |    0 |
| ???810 | E4 |    0 |
| ???810 | E5 |    0 |
| ???810 | E6 |    0 |
| ???820 | E1 |    1 |
| ???820 | E2 |    1 |
| ???820 | E3 |    1 |
| ???820 | E4 |    1 |
| ???820 | E5 |  0.5 |
| ???820 | E6 |    1 |
| ???834 | E1 |    1 |
| ???834 | E2 |    0 |
| ???834 | E3 |    1 |
| ???834 | E4 |    0 |
| ???834 | E5 |    1 |
| ???834 | E6 |  0.5 |
| ???848 | E1 |    1 |
| ???848 | E2 |    1 |
| ???848 | E3 |    1 |
| ???848 | E4 |    1 |
| ???848 | E5 |  0.5 |
| ???848 | E6 |    1 |
| ???849 | E1 |    1 |
| ???849 | E2 |  0.5 |
| ???849 | E3 |  0.5 |
| ???849 | E4 |    0 |
| ???849 | E5 |  0.5 |
| ???849 | E6 |    1 |
| ???856 | E1 |    0 |
| ???856 | E2 |  0.5 |
| ???856 | E3 |    0 |
| ???856 | E4 |    0 |
| ???856 | E5 |    0 |
| ???856 | E6 |    0 |
| ???866 | E1 |  0.5 |
| ???866 | E2 |    1 |
| ???866 | E3 |  0.5 |
| ???866 | E4 |  0.5 |
| ???866 | E5 |  0.5 |
| ???866 | E6 |    1 |
| ???950 | E1 |    1 |
| ???950 | E2 |    1 |
| ???950 | E3 |    1 |
| ???950 | E4 |    1 |
| ???950 | E5 |  0.5 |
| ???950 | E6 |    1 |
| ???973 | E1 |    1 |
| ???973 | E2 |    0 |
| ???973 | E3 |  0.5 |
| ???973 | E4 |  0.5 |
| ???973 | E5 |    1 |
| ???973 | E6 |    1 |
|--------+----+------|

** Respostas

1. Caso a compilação considerasse escopo estático, a ordem de
   impressão seria =6 6 8 8=. No caso do escopo for dinâmico, a ordem de
   impressão seria =6 6 7 6=.

2. Existem somente uma variável estática, alocada no segmento de
   dados: é a variável =x= (linha 1). As variáveis dinâmicas, alocadas
   na pilha, são as seguintes: =n= (linha 3), =x= (linha 17), =argc= e =argv=
   (linha 22).

3. Existem duas variáveis alocadas estaticamente: a variável global =x=
   (linha 1) e variável =b= (linha 4), pelo fato desta ter sido
   declarada com a palavra chave =static=, indicando uma alocação
   estática no segmento de dados. As variáveis dinâmicas alocadas /na
   pilha/ são: =int a= (linha 3), =int c= (linha 5), =int d= (linha 10) e
   =float *e= (um ponteiro para ponto-flutuante, na linha 11). Como
   variáveis dinâmicas alocadas /no monte/ temos apenas o conteúdo
   apontado pela variável =e=.

4. O segmento de dados deste programa contém apenas a variável =x=
   (linha 1). Esta alocação estática é feita no momento da compilação
   do programa. As variáveis dinâmicas, alocadas em tempo de execução
   na pilha do programa, são =n= (linha 3), =x= (linha 17), =argc= e =argv=
   (linha 22). Nenhuma variável é alocada dinamicamente no monte, pois
   o programa não apresenta nenhuma diretiva de alocação dinâmica.

5. O segmento de dados deste programa contém duas variáveis: a
   variável global =x= (linha 1) e variável =b= (linha 4), pelo fato desta
   ter sido declarada com a palavra chave =static=, indicando uma
   alocação estática no segmento de dados. As variáveis alocadas
   dinamicamente na pilha, em tempo de execução, são: =int a= (linha 3),
   =int c= (linha 5), =int d= (linha 10) e =float *e= (linha 11). A única
   variável cujo conteúdo é alocado dinamicamente em tempo de execução
   é a variável =e= (linha 11).

6. O problema deste programa se encontra na função =diaSemana=, que
   retorna um ponteiro para uma variável alocada dinamicamente na
   pilha: =diaExt=. Ora, no momento que esta função retornar, o espaço
   na pilha que ocupava a variável poderá ser sobrescrito por qualquer
   outra chamada de função. Isto explica o comportamento errático, uma
   vez que o endereço para o qual o ponteiro aponta pode ainda conter
   dados úteis. Isto depende, claramente, das funções que forem
   chamadas entre o retorno da função =diaSemana= e o uso do ponteiro.

   Uma solução possível é marcar a variável =diaExt= como
   estática. Dessa forma, seu espaço estará sempre válido no segmento
   de dados do programa, sendo perfeitamente válida o retorno de um
   ponteiro para este espaço. Uma segunda solução é alocar
   dinamicamente o espaço da variável =diaExt=, mas a função
   chamadora deverá realizar um =free= deste espaço
   posteriormente, após o retorno da função =diaSemana=. Uma
   terceira abordagem é transformar =diaExt= em global, tendo o
   mesmo efeito que a primeira solução descrita acima.
